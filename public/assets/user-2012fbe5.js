import{r as f,g as Te,n as Ue,h as Re,_ as B,i as Ae,C as Ne,e as Ie,b as Pe,j as e,d as De,Q as q,U as te,f as Ee,O as We,T as _,P as p,S as de,V as ue,M as N,X as R,N as S,y as Oe,Y as Me,Z as ze,W as Ge}from"./index-68cf636a.js";import{M as Be,a as L,O as _e,C as Fe}from"./axios-9c6a5e82.js";import{T as K,a as C,D as Y,b as J,c as ee,d as ne,e as Ve,f as Le,g as re,h as qe,i as Ke,j as Ze,k as He}from"./label-a76510e7.js";import{C as he}from"./Checkbox-9fd7f520.js";import{T as U,I as Qe}from"./TextField-53147780.js";import{D as Xe}from"./DialogContentText-e7983820.js";import{B as O}from"./Button-71f483d7.js";import{C as Ye}from"./Container-c2567aed.js";const Je=f.createContext(),ie=Je;function en(n){return Te("MuiGrid",n)}const nn=[0,1,2,3,4,5,6,7,8,9,10],tn=["column-reverse","column","row-reverse","row"],sn=["nowrap","wrap-reverse","wrap"],G=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],F=Ue("MuiGrid",["root","container","item","zeroMinWidth",...nn.map(n=>`spacing-xs-${n}`),...tn.map(n=>`direction-xs-${n}`),...sn.map(n=>`wrap-xs-${n}`),...G.map(n=>`grid-xs-${n}`),...G.map(n=>`grid-sm-${n}`),...G.map(n=>`grid-md-${n}`),...G.map(n=>`grid-lg-${n}`),...G.map(n=>`grid-xl-${n}`)]),rn=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function M(n){const t=parseFloat(n);return`${t}${String(n).replace(String(t),"")||"px"}`}function an({theme:n,ownerState:t}){let s;return n.breakpoints.keys.reduce((i,r)=>{let a={};if(t[r]&&(s=t[r]),!s)return i;if(s===!0)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(s==="auto")a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const l=q({values:t.columns,breakpoints:n.breakpoints.values}),g=typeof l=="object"?l[r]:l;if(g==null)return i;const o=`${Math.round(s/g*1e8)/1e6}%`;let u={};if(t.container&&t.item&&t.columnSpacing!==0){const d=n.spacing(t.columnSpacing);if(d!=="0px"){const j=`calc(${o} + ${M(d)})`;u={flexBasis:j,maxWidth:j}}}a=B({flexBasis:o,flexGrow:0,maxWidth:o},u)}return n.breakpoints.values[r]===0?Object.assign(i,a):i[n.breakpoints.up(r)]=a,i},{})}function on({theme:n,ownerState:t}){const s=q({values:t.direction,breakpoints:n.breakpoints.values});return te({theme:n},s,i=>{const r={flexDirection:i};return i.indexOf("column")===0&&(r[`& > .${F.item}`]={maxWidth:"none"}),r})}function pe({breakpoints:n,values:t}){let s="";Object.keys(t).forEach(r=>{s===""&&t[r]!==0&&(s=r)});const i=Object.keys(n).sort((r,a)=>n[r]-n[a]);return i.slice(0,i.indexOf(s))}function ln({theme:n,ownerState:t}){const{container:s,rowSpacing:i}=t;let r={};if(s&&i!==0){const a=q({values:i,breakpoints:n.breakpoints.values});let l;typeof a=="object"&&(l=pe({breakpoints:n.breakpoints.values,values:a})),r=te({theme:n},a,(g,o)=>{var u;const d=n.spacing(g);return d!=="0px"?{marginTop:`-${M(d)}`,[`& > .${F.item}`]:{paddingTop:M(d)}}:(u=l)!=null&&u.includes(o)?{}:{marginTop:0,[`& > .${F.item}`]:{paddingTop:0}}})}return r}function cn({theme:n,ownerState:t}){const{container:s,columnSpacing:i}=t;let r={};if(s&&i!==0){const a=q({values:i,breakpoints:n.breakpoints.values});let l;typeof a=="object"&&(l=pe({breakpoints:n.breakpoints.values,values:a})),r=te({theme:n},a,(g,o)=>{var u;const d=n.spacing(g);return d!=="0px"?{width:`calc(100% + ${M(d)})`,marginLeft:`-${M(d)}`,[`& > .${F.item}`]:{paddingLeft:M(d)}}:(u=l)!=null&&u.includes(o)?{}:{width:"100%",marginLeft:0,[`& > .${F.item}`]:{paddingLeft:0}}})}return r}function dn(n,t,s={}){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[s[`spacing-xs-${String(n)}`]];const i=[];return t.forEach(r=>{const a=n[r];Number(a)>0&&i.push(s[`spacing-${r}-${String(a)}`])}),i}const un=Re("div",{name:"MuiGrid",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:s}=n,{container:i,direction:r,item:a,spacing:l,wrap:g,zeroMinWidth:o,breakpoints:u}=s;let d=[];i&&(d=dn(l,u,t));const j=[];return u.forEach(v=>{const x=s[v];x&&j.push(t[`grid-${v}-${String(x)}`])}),[t.root,i&&t.container,a&&t.item,o&&t.zeroMinWidth,...d,r!=="row"&&t[`direction-xs-${String(r)}`],g!=="wrap"&&t[`wrap-xs-${String(g)}`],...j]}})(({ownerState:n})=>B({boxSizing:"border-box"},n.container&&{display:"flex",flexWrap:"wrap",width:"100%"},n.item&&{margin:0},n.zeroMinWidth&&{minWidth:0},n.wrap!=="wrap"&&{flexWrap:n.wrap}),on,ln,cn,an);function hn(n,t){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[`spacing-xs-${String(n)}`];const s=[];return t.forEach(i=>{const r=n[i];if(Number(r)>0){const a=`spacing-${i}-${String(r)}`;s.push(a)}}),s}const pn=n=>{const{classes:t,container:s,direction:i,item:r,spacing:a,wrap:l,zeroMinWidth:g,breakpoints:o}=n;let u=[];s&&(u=hn(a,o));const d=[];o.forEach(v=>{const x=n[v];x&&d.push(`grid-${v}-${String(x)}`)});const j={root:["root",s&&"container",r&&"item",g&&"zeroMinWidth",...u,i!=="row"&&`direction-xs-${String(i)}`,l!=="wrap"&&`wrap-xs-${String(l)}`,...d]};return Ee(j,en,t)},gn=f.forwardRef(function(t,s){const i=Ae({props:t,name:"MuiGrid"}),{breakpoints:r}=Ne(),a=Ie(i),{className:l,columns:g,columnSpacing:o,component:u="div",container:d=!1,direction:j="row",item:v=!1,rowSpacing:x,spacing:w=0,wrap:I="wrap",zeroMinWidth:A=!1}=a,k=Pe(a,rn),b=x||w,P=o||w,z=f.useContext(ie),y=d?g||12:z,D={},$=B({},k);r.keys.forEach(m=>{k[m]!=null&&(D[m]=k[m],delete $[m])});const E=B({},a,{columns:y,container:d,direction:j,item:v,rowSpacing:b,columnSpacing:P,wrap:I,zeroMinWidth:A,spacing:w},D,{breakpoints:r.keys}),W=pn(E);return e.jsx(ie.Provider,{value:y,children:e.jsx(un,B({ownerState:E,className:De(W.root,l),as:u,ref:s},$))})}),ae=gn;function ge({query:n}){return e.jsx(K,{children:e.jsx(C,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(We,{sx:{textAlign:"center"},children:[e.jsx(_,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(_,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}ge.propTypes={query:p.string};const oe={}.VITE_API_URL||"http://localhost:3000";function xe({id:n,selected:t,name:s,avatarUrl:i,roleName:r,email:a,description:l,handleClick:g,refreshUserList:o}){const[u,d]=f.useState(null),[j,v]=f.useState(!1),[x,w]=f.useState({name:s,roleName:r,email:a,description:l}),[I,A]=f.useState(!1),k=m=>{d(m.currentTarget)},b=()=>{d(null)},P=()=>{w({name:s,roleName:r,email:a,description:l}),v(!0),b()},z=()=>{v(!1),w({name:s,roleName:r,email:a,description:l})},y=m=>T=>{w({...x,[m]:T.target.value})},D=async()=>{const m={name:x.name,role:x.roleName,email:x.email,description:x.description};try{let T={id:localStorage.getItem("id")};await L.patch(`${oe}/users/update/${n}/${T.id}`,m),o(),v(!1)}catch(T){console.error("Error saving edited data:",T)}},$=()=>{A(!0),b()},E=async()=>{try{const m=localStorage.getItem("id"),T=await L.delete(`${oe}/users/${n}/${m}`);o()}catch(m){console.error("Error deleting user:",m)}A(!1)},W=()=>{A(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(K,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,children:[e.jsx(C,{padding:"checkbox",children:e.jsx(he,{disableRipple:!0,checked:t,onChange:m=>g(m,n)})}),e.jsx(C,{component:"th",scope:"row",padding:"none",children:e.jsxs(de,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(ue,{alt:s,src:i}),e.jsx(_,{variant:"subtitle2",noWrap:!0,children:j?e.jsx(U,{value:x.name,onChange:y("name")}):s})]})}),e.jsx(C,{children:j?e.jsxs(U,{select:!0,value:x.roleName,onChange:y("roleName"),children:[e.jsx(N,{value:"organizer",children:"Organizer"}),e.jsx(N,{value:"admin",children:"Admin"}),e.jsx(N,{value:"attendee",children:"Attendee"})]}):r}),e.jsx(C,{children:j?e.jsx(U,{value:x.email,onChange:y("email")}):a}),e.jsx(C,{children:j?e.jsx(U,{value:x.description,onChange:y("description")}):l}),e.jsxs(C,{align:"right",children:[j?e.jsxs(e.Fragment,{children:[e.jsx(R,{onClick:D,color:"primary",children:e.jsx(S,{icon:"eva:checkmark-circle-2-outline",width:"24",height:"24"})}),e.jsx(R,{onClick:z,color:"secondary",children:e.jsx(S,{icon:"eva:close-circle-outline",width:"24",height:"24"})})]}):e.jsx(R,{onClick:k,children:e.jsx(S,{icon:"eva:more-vertical-fill",width:"24",height:"24"})}),e.jsxs(Be,{anchorEl:u,open:!!u,onClose:b,children:[e.jsxs(N,{onClick:P,children:[e.jsx(S,{icon:"eva:edit-fill",width:"24",height:"24"}),"Edit"]}),e.jsxs(N,{onClick:$,children:[e.jsx(S,{icon:"eva:trash-2-outline",width:"24",height:"24"}),"Delete"]})]})]})]}),e.jsxs(Y,{open:I,onClose:W,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(J,{id:"alert-dialog-title",children:"Confirm Delete"}),e.jsx(ee,{children:e.jsx(Xe,{id:"alert-dialog-description",children:"Are you sure you want to delete this user?"})}),e.jsxs(ne,{children:[e.jsx(O,{onClick:W,children:"Cancel"}),e.jsx(O,{onClick:E,color:"primary",children:"Delete"})]})]})]})}xe.propTypes={id:p.string.isRequired,selected:p.bool.isRequired,name:p.string.isRequired,avatarUrl:p.string,roleName:p.string.isRequired,email:p.string.isRequired,description:p.string.isRequired,handleClick:p.func.isRequired,refreshUserList:p.func.isRequired};const xn={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function mn(n,t,s){return n?Math.max(0,(1+n)*t-s):0}function le(n,t,s){return n[s]===null?1:t[s]===null||t[s]<n[s]?-1:t[s]>n[s]?1:0}function fn(n,t){return n==="desc"?(s,i)=>le(s,i,t):(s,i)=>-le(s,i,t)}function jn({inputData:n,comparator:t,filterName:s}){const i=n.map((r,a)=>[r,a]);return i.sort((r,a)=>{const l=t(r[0],a[0]);return l!==0?l:r[1]-a[1]}),n=i.map(r=>r[0]),s&&(n=n.filter(r=>r.name?r.name.toLowerCase().indexOf(s.toLowerCase())!==-1:"")),n}function me({order:n,orderBy:t,rowCount:s,headLabel:i,numSelected:r,onRequestSort:a,onSelectAllClick:l}){const g=o=>u=>{a(u,o)};return e.jsx(Ve,{children:e.jsxs(K,{children:[e.jsx(C,{padding:"checkbox",children:e.jsx(he,{indeterminate:r>0&&r<s,checked:s>0&&r===s,onChange:l})}),i.map(o=>e.jsx(C,{align:o.align||"left",sortDirection:t===o.id?n:!1,sx:{width:o.width,minWidth:o.minWidth},children:e.jsxs(Le,{hideSortIcon:!0,active:t===o.id,direction:t===o.id?n:"asc",onClick:g(o.id),children:[o.label,t===o.id?e.jsx(Oe,{sx:{...xn},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},o.id)),e.jsx(C,{style:{textAlign:"right"},children:e.jsx(R,{disabled:!0,children:e.jsx(S,{icon:"eva:more-vertical-fill",width:"24",height:"24"})})})]})})}me.propTypes={order:p.oneOf(["asc","desc"]),orderBy:p.string,rowCount:p.number,headLabel:p.array,numSelected:p.number,onRequestSort:p.func,onSelectAllClick:p.func};function fe({emptyRows:n,height:t}){return n?e.jsx(K,{sx:{...t&&{height:t*n}},children:e.jsx(C,{colSpan:9})}):null}fe.propTypes={emptyRows:p.number,height:p.number};function je({numSelected:n,filterName:t,onFilterName:s}){return e.jsxs(Me,{sx:{height:96,display:"flex",justifyContent:"space-between",p:i=>i.spacing(0,1,0,3),...n>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[n>0?e.jsxs(_,{component:"div",variant:"subtitle1",children:[n," selected"]}):e.jsx(_e,{value:t,onChange:s,placeholder:"Search user...",startAdornment:e.jsx(Qe,{position:"start",children:e.jsx(S,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),n>0?e.jsx(re,{title:"Delete",children:e.jsx(R,{children:e.jsx(S,{icon:"eva:trash-2-fill"})})}):e.jsx(re,{title:"Filter list",children:e.jsx(R,{children:e.jsx(S,{icon:"ic:round-filter-list"})})})]})}je.propTypes={numSelected:p.number,filterName:p.string,onFilterName:p.func};const ce={}.VITE_API_URL||"http://localhost:3000";function vn(){const[n,t]=f.useState([]),[s,i]=f.useState(0),[r,a]=f.useState("asc"),[l,g]=f.useState([]),[o,u]=f.useState("name"),[d,j]=f.useState(""),[v,x]=f.useState(5),[w,I]=f.useState(!1),[A,k]=f.useState(!1),[b,P]=f.useState({name:"",email:"",role:"organizer",description:"",avatarUrl:""}),z="/assets/images/avatars/avatar_2.jpg",y=Array.from({length:15},(c,h)=>`avatar_${h+1}.jpg`);f.useEffect(()=>{$()},[]);const D=localStorage.getItem("themeMode")==="dark",$=()=>{let c={id:localStorage.getItem("id")};L.get(`${ce}/users/all/${c.id}`).then(h=>{t(h.data)}).catch(h=>console.error("Error fetching users:",h))},E=(c,h)=>{a(o===h&&r==="asc"?"desc":"asc"),u(h)},W=c=>{g(c.target.checked?n.map(h=>h.name):[])},m=(c,h)=>{let X=l.indexOf(h)===-1?[...l,h]:l.filter($e=>$e!==h);g(X)},T=(c,h)=>{i(h)},ve=c=>{x(parseInt(c.target.value,10)),i(0)},be=c=>{j(c.target.value)},Ce=()=>{I(!0)},Z=()=>{I(!1)},Se=()=>{k(!0)},se=()=>{k(!1)},we=c=>{P({...b,avatarUrl:c}),k(!1)},V=c=>{const{name:h,value:Q}=c.target;P(X=>({...X,[h]:Q}))},ke=async()=>{try{let c={id:localStorage.getItem("id")};const h=await L.post(`${ce}/users/register`,b);Z(),$()}catch(c){console.error("There was an error submitting the form",c)}},H=jn({inputData:n,comparator:fn(r,o),filterName:d}),ye=!H.length&&!!d;return e.jsxs(Ye,{children:[e.jsxs(de,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(_,{variant:"h4",children:"Users"}),e.jsx(O,{variant:"contained",color:"inherit",startIcon:e.jsx(S,{icon:"eva:plus-fill"}),onClick:Ce,children:"New User"})]}),e.jsxs(Fe,{children:[e.jsx(je,{numSelected:l.length,filterName:d,onFilterName:be}),e.jsx(ze,{children:e.jsx(qe,{children:e.jsxs(Ke,{children:[e.jsx(me,{order:r,orderBy:o,rowCount:n.length,numSelected:l.length,onRequestSort:E,onSelectAllClick:W,headLabel:[{id:"name",label:"Name"},{id:"role",label:"Role"},{id:"email",label:"Email"},{id:"description",label:"Description"}]}),e.jsxs(Ze,{children:[H.slice(s*v,s*v+v).map(c=>e.jsx(xe,{id:c._id,selected:l.includes(c.name),name:c.name,roleName:c.role,email:c.email,description:c.description,avatarUrl:"/assets/images/avatars/"+c.avatarUrl,handleClick:m,refreshUserList:$},c._id)),e.jsx(fe,{emptyRows:mn(s,v,n.length)}),ye&&e.jsx(ge,{})]})]})})}),e.jsx(He,{rowsPerPageOptions:[5,10,25],component:"div",count:H.length,rowsPerPage:v,page:s,onPageChange:T,onRowsPerPageChange:ve})]}),e.jsxs(Y,{open:w,onClose:Z,sx:{"& .MuiDialog-paper":{boxShadow:D?"none":void 0}},children:[e.jsx(J,{children:"Add New User"}),e.jsxs(ee,{children:[e.jsx(R,{onClick:Se,sx:{margin:"auto",display:"block"},children:e.jsx(ue,{src:b.avatarUrl?`/assets/images/avatars/${b.avatarUrl}`:z,alt:"Avatar",sx:{width:64,height:64}})}),e.jsx(U,{margin:"dense",name:"name",label:"Full Name",type:"text",fullWidth:!0,value:b.name,onChange:V}),e.jsx(U,{margin:"dense",name:"email",label:"Email Address",type:"email",fullWidth:!0,value:b.email,onChange:V}),e.jsxs(U,{margin:"dense",name:"role",label:"Role",select:!0,fullWidth:!0,value:b.role,onChange:V,children:[e.jsx(N,{value:"organizer",children:"Organizer"}),e.jsx(N,{value:"admin",children:"Admin"})]}),e.jsx(U,{margin:"dense",name:"description",label:"Description",multiline:!0,rows:4,fullWidth:!0,value:b.description,onChange:V})]}),e.jsxs(ne,{children:[e.jsx(O,{onClick:Z,children:"Cancel"}),e.jsx(O,{onClick:ke,children:"Submit"})]})]}),e.jsxs(Y,{open:A,onClose:se,children:[e.jsx(J,{children:"Select Avatar"}),e.jsx(ee,{children:e.jsx(ae,{container:!0,spacing:2,children:y.map((c,h)=>e.jsx(ae,{item:!0,xs:4,children:e.jsx(R,{onClick:()=>we(c),style:{padding:0},children:e.jsx("img",{src:`/assets/images/avatars/${c}`,alt:`Avatar ${h+1}`,style:{width:64,height:64,borderRadius:"50%"}})})},h))})}),e.jsx(ne,{children:e.jsx(O,{onClick:se,children:"Cancel"})})]})]})}function Un(){return e.jsxs(e.Fragment,{children:[e.jsx(Ge,{children:e.jsx("title",{children:" User | CITRA Dashboard "})}),e.jsx(vn,{})]})}export{Un as default};
