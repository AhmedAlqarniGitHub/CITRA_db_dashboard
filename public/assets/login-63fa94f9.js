import{n as B,g as S,h as C,_ as I,F as v,r as m,i as $,b as E,j as a,f as U,C as k,ai as R,y as M,aj as T,o as W,ak as _,S as L,T as w,al as b,X as A,N as F,W as z}from"./index-68cf636a.js";import{u as N,C as D,a as G}from"./axios-9c6a5e82.js";import{T as y,I as V}from"./TextField-53147780.js";import{B as X}from"./Button-71f483d7.js";import{C as q}from"./CircularProgress-12514937.js";function H(n){return S("MuiLoadingButton",n)}const J=B("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),s=J,K=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],O=n=>{const{loading:o,loadingPosition:i,classes:e}=n,r={root:["root",o&&"loading"],startIcon:[o&&`startIconLoading${v(i)}`],endIcon:[o&&`endIconLoading${v(i)}`],loadingIndicator:["loadingIndicator",o&&`loadingIndicator${v(i)}`]},d=U(r,H,e);return I({},e,d)},Q=n=>n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"&&n!=="classes",Y=C(X,{shouldForwardProp:n=>Q(n)||n==="classes",name:"MuiLoadingButton",slot:"Root",overridesResolver:(n,o)=>[o.root,o.startIconLoadingStart&&{[`& .${s.startIconLoadingStart}`]:o.startIconLoadingStart},o.endIconLoadingEnd&&{[`& .${s.endIconLoadingEnd}`]:o.endIconLoadingEnd}]})(({ownerState:n,theme:o})=>I({[`& .${s.startIconLoadingStart}, & .${s.endIconLoadingEnd}`]:{transition:o.transitions.create(["opacity"],{duration:o.transitions.duration.short}),opacity:0}},n.loadingPosition==="center"&&{transition:o.transitions.create(["background-color","box-shadow","border-color"],{duration:o.transitions.duration.short}),[`&.${s.loading}`]:{color:"transparent"}},n.loadingPosition==="start"&&n.fullWidth&&{[`& .${s.startIconLoadingStart}, & .${s.endIconLoadingEnd}`]:{transition:o.transitions.create(["opacity"],{duration:o.transitions.duration.short}),opacity:0,marginRight:-8}},n.loadingPosition==="end"&&n.fullWidth&&{[`& .${s.startIconLoadingStart}, & .${s.endIconLoadingEnd}`]:{transition:o.transitions.create(["opacity"],{duration:o.transitions.duration.short}),opacity:0,marginLeft:-8}})),Z=C("span",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(n,o)=>{const{ownerState:i}=n;return[o.loadingIndicator,o[`loadingIndicator${v(i.loadingPosition)}`]]}})(({theme:n,ownerState:o})=>I({position:"absolute",visibility:"visible",display:"flex"},o.loadingPosition==="start"&&(o.variant==="outlined"||o.variant==="contained")&&{left:o.size==="small"?10:14},o.loadingPosition==="start"&&o.variant==="text"&&{left:6},o.loadingPosition==="center"&&{left:"50%",transform:"translate(-50%)",color:(n.vars||n).palette.action.disabled},o.loadingPosition==="end"&&(o.variant==="outlined"||o.variant==="contained")&&{right:o.size==="small"?10:14},o.loadingPosition==="end"&&o.variant==="text"&&{right:6},o.loadingPosition==="start"&&o.fullWidth&&{position:"relative",left:-10},o.loadingPosition==="end"&&o.fullWidth&&{position:"relative",right:-10})),oo=m.forwardRef(function(o,i){const e=$({props:o,name:"MuiLoadingButton"}),{children:r,disabled:d=!1,id:h,loading:l=!1,loadingIndicator:x,loadingPosition:f="center",variant:p="text"}=e,u=E(e,K),c=N(h),t=x??a.jsx(q,{"aria-labelledby":c,color:"inherit",size:16}),g=I({},e,{disabled:d,loading:l,loadingIndicator:t,loadingPosition:f,variant:p}),j=O(g),P=l?a.jsx(Z,{className:j.loadingIndicator,ownerState:g,children:t}):null;return a.jsxs(Y,I({disabled:d||l,id:c,ref:i},u,{variant:p,classes:j,ownerState:g,children:[g.loadingPosition==="end"?r:P,g.loadingPosition==="end"?P:r]}))}),no=oo,ao={}.VITE_API_URL||"https://citra-api-qp4p25cifq-ww.a.run.app";function to(){const n=k();R();const[o,i]=m.useState(!1),[e,r]=m.useState(!1),[d,h]=m.useState(""),[l,x]=m.useState({email:"",password:""}),f=u=>{const{name:c,value:t}=u.target;x(g=>({...g,[c]:t}))},p=async()=>{var u,c;r(!0);try{const t=await G.post(`${ao}/users/login`,l);t.status===200?(window.localStorage.setItem("id",t.data.info.id),window.localStorage.setItem("name",t.data.info.name),window.localStorage.setItem("role",t.data.info.role),window.localStorage.setItem("email",t.data.info.email),window.localStorage.setItem("avatarUrl",t.data.info.avatarUrl),window.location.href="/"):(window.localStorage.removeItem("id"),window.localStorage.removeItem("name"),window.localStorage.removeItem("role"),window.localStorage.removeItem("email"),window.localStorage.removeItem("avatarUrl"),h("Unexpected error occurred. Please try again."))}catch(t){window.localStorage.removeItem("id"),window.localStorage.removeItem("name"),window.localStorage.removeItem("role"),window.localStorage.removeItem("email"),window.localStorage.removeItem("avatarUrl"),h(((c=(u=t.response)==null?void 0:u.data)==null?void 0:c.error)||"An unexpected error occurred.")}finally{r(!1)}};return a.jsxs(M,{sx:{...T({color:W(n.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[a.jsx(_,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),a.jsx(L,{alignItems:"center",justifyContent:"center",sx:{height:1},children:a.jsxs(D,{sx:{p:5,width:1,maxWidth:420},children:[a.jsx(w,{variant:"h4",gutterBottom:!0,children:"Sign in to CITRA"}),a.jsxs(w,{variant:"body2",sx:{mt:2,mb:5},children:["Donâ€™t have an account?",a.jsx(b,{variant:"subtitle2",sx:{ml:.5},children:"Get started"})]}),a.jsxs(L,{spacing:3,children:[a.jsx(y,{name:"email",label:"Email address",onChange:f,value:l.email,sx:{"& .MuiInputBase-root":{"&.Mui-filled":{backgroundColor:"none"}}}}),a.jsx(y,{fullWidth:!0,name:"password",label:"Password",type:o?"text":"password",onChange:f,value:l.password,InputProps:{endAdornment:a.jsx(V,{position:"end",children:a.jsx(A,{onClick:()=>i(!o),edge:"end",children:a.jsx(F,{icon:o?"eva:eye-fill":"eva:eye-off-fill"})})})},sx:{"& .MuiInputBase-root":{"&.Mui-filled":{backgroundColor:"white"}}}}),d&&a.jsx(w,{color:"error",variant:"body2",sx:{mt:2},children:d}),a.jsx(L,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{my:3},children:a.jsx(b,{variant:"subtitle2",underline:"hover",children:"Forgot password?"})}),a.jsx(no,{loading:e,fullWidth:!0,size:"large",variant:"contained",onClick:p,children:"Login"})]})]})})]})}function co(){return a.jsxs(a.Fragment,{children:[a.jsx(z,{children:a.jsx("title",{children:" Login | CITRA Dashboard "})}),a.jsx(to,{})]})}export{co as default};
